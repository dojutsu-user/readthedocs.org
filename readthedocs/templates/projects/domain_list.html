{% extends "projects/project_edit_base.html" %}

{% load i18n %}

{% block title %}{% trans "Edit Domains" %}{% endblock %}

{% block nav-dashboard %} class="active"{% endblock %}

{% block editing-option-edit-proj %}class="active"{% endblock %}

{% block project-domains-active %}active{% endblock %}
{% block project_edit_content_header %}{% trans "Domains" %}{% endblock %}

{% block project_edit_content %}
  <p class="help_text">
    {% trans "This allows you to add domains to your project. This allows them to live in the same namespace in the URLConf for a subdomain or CNAME." %}
  </p>

  {% if object_list %}
    <div class="module">
      <div class="module-wrapper">
        <div class="module-header">
          <h3>{% trans "Existing Domains" %}</h3>
        </div>
        <div class="module-list">
          <div class="module-list-wrapper">
            <ul>
              {% for domain in object_list %}
                <li class="module-item">
                <span class="module-item-title {% if domain.machine %}domain-machine{% endif %} {% if domain.canonical %}domain-canonical{% endif %}">
                  {{ domain.domain }}
                </span>
                <ul class="module-item-menu">
                  <li><a href="{% url 'projects_domains_edit' project.slug domain.pk %}">{% trans "Edit" %}</a></li>
                  <li>
                    <form method="post" action="{% url 'projects_domains_delete' project.slug domain.pk %}" onsubmit="return deleteConfirmation()">
                      {% csrf_token %}
                      <a type="submit" href="#" onclick="$(this).closest('form').submit()">{% trans "Remove" %}</a>
                    </form>
                  </li>
                </ul>
                </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>
  {% endif %}

  <h3> {% trans "Add new Domain" %} </h3>
  <form method="post" action="{% url 'projects_domains_create' project.slug %}">{% csrf_token %}
    {{ form.as_p }}
    <p>
      <input style="display: inline;" type="submit" value="{% trans "Add" %}">
    </p>
  </form>
{% endblock %}

{% block footerjs %}
  function deleteConfirmation() {
    var message = "{% trans 'Do you really want to remove the selected domain?' %}";
    var ans = confirm(message);
    if (ans == true) {
      return true;
    } else {
      return false;
    }
  }
{% endblock %}
